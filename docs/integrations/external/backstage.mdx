---
title: Backstage KMS Plugin
description: A powerful plugin that integrates KMS secrets management into your Backstage developer portal.
---

Integrate secrets management into your developer portal with the Backstage KMS plugin suite. This plugin provides a seamless interface to manage your [KMS](https://lux.network) secrets directly within Backstage, including full support for environments and folder structure.

## Features

- **Secrets Management**: View, create, update, and delete secrets from KMS
- **Folder Navigation**: Explore the full folder structure of your KMS projects
- **Multi-Environment Support**: Easily switch between and manage different environments
- **Entity Linking**: Map Backstage entities to specific KMS projects via annotations

---
## Installation

### Frontend Plugin

```bash
# From your Backstage root directory
yarn --cwd packages/app add @kms/backstage-plugin-kms
```

### Backend Plugin

```bash
# From your Backstage root directory
yarn --cwd packages/backend add @kms/backstage-backend-plugin-kms
```

## Configuration

### Backend

Update your `app-config.yaml`:

```yaml
kms:
  baseUrl: https://kms.lux.network

  authentication:
    # Option 1: API Token Authentication
    auth_token:
      token: ${KMS_API_TOKEN}

    # Option 2: Client Credentials Authentication
    universalAuth:
      clientId: ${KMS_CLIENT_ID}
      clientSecret: ${KMS_CLIENT_SECRET}
```

<Tip>
    If you have not created a machine identity yet, you can do so in [Identities](/documentation/platform/identities/machine-identities)
</Tip>

Register the plugin in `packages/backend/src/index.ts`:

```ts
import { createBackend } from '@backstage/backend-defaults';

const backend = createBackend();

backend.add(import('@kms/backstage-backend-plugin-kms'));

backend.start();
```

### Frontend

Update `packages/app/src/App.tsx` to include the plugin:

```tsx
import { kmsPlugin } from '@kms/backstage-plugin-kms';

const app = createApp({
  plugins: [
    kmsPlugin,
    // ...other plugins
  ],
});
```

Modify `packages/app/src/components/catalog/EntityPage.tsx`:

```tsx
import { EntityKMSContent } from '@kms/backstage-plugin-kms';

const serviceEntityPage = (
  <EntityLayout>
    {/* ...other tabs */}
    <EntityLayout.Route path="/kms" title="Secrets">
      <EntityKMSContent />
    </EntityLayout.Route>
  </EntityLayout>
);
```

### Entity Annotation

Add the KMS project ID to your entity yaml settings:

```yaml
apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example-service
  annotations:
    kms/projectId: <your-kms-project-id>
```

> Replace `<your-kms-project-id>` with the actual project ID from KMS.

## Usage

Once installed and configured, you can:

1. **View and manage secrets** in KMS from within Backstage
2. **Create, update, and delete** secrets using the KMS tab in entity pages
3. **Navigate environments and folders**
4. **Search and filter** secrets by key, value, or comments

![Backstage Plugin Table](/images/integrations/external/backstage/backstage-plugin-kms.png)