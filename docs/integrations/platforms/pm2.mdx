---
title: "PM2"
description: "How to use KMS to inject environment variables and secrets with PM2 into a Node.js app"
---

Prerequisites:

- Set up and add envars to [KMS Cloud](https://kms.lux.network)
- [Install the CLI](/cli/overview)

## Initialize KMS for your Node.js app

```bash
# navigate to the root of your of your project
cd /path/to/project

# then initialize kms
kms init
```

## Create a bash or js script

<CodeGroup>

```bash kms-run.sh
kms run -- npm start
```

```js kms-run.js
const spawn = require("child_process").spawn;

const kms = spawn("kms", ["run", "--", "npm", "start"]);

kms.stdout.on("data", (data) => console.log(`${data}`));
kms.stderr.on("data", (data) => console.error(`${data}`));
```

</CodeGroup>

## Start your application as usual but with the script

<CodeGroup>

```bash kms-run.sh
pm2 start kms-run.sh
```

```bash kms-run.js
pm2 start kms-run.js
```

</CodeGroup>
