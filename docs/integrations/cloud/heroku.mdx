---
title: "Heroku"
description: "How to sync secrets from KMS to Heroku"
---

<Tabs>
  <Tab title="Usage">
    Prerequisites:

    - Set up and add envars to [KMS Cloud](https://kms.lux.network)

    <Steps>
      <Step title="Authorize KMS for Heroku">
        Navigate to your project's integrations tab in KMS.

        ![integrations](../../images/integrations.png)

        Press on the Heroku tile and grant KMS access to your Heroku account.

        ![integrations heroku authorization](../../images/integrations/heroku/integrations-heroku-auth.png)

      </Step>
      <Step title="Start integration">
        Select which KMS environment secrets you want to sync to which Heroku app and press create integration to start syncing secrets to Heroku.

        ![integrations heroku](../../images/integrations/heroku/integrations-heroku-create.png)

        Here's some guidance on each field:

        - Project Environment: The environment in the current KMS project from which you want to sync secrets from.
        - Secrets Path: The path in the current KMS project from which you want to sync secrets from such as `/` (for secrets that do not reside in a folder) or `/foo/bar` (for secrets nested in a folder, in this case a folder called `bar` in another folder called `foo`).
        - Heroku App: The application in Heroku that you want to sync secrets to.
        - Initial Sync Behavior (default is **Import - Prefer values from KMS**): The behavior of the first sync operation triggered after creating the integration.
          - **No Import - Overwrite all values in Heroku**: Sync secrets and overwrite any existing secrets in Heroku.
          - **Import - Prefer values from KMS**: Import secrets from Heroku to KMS; if a secret with the same name already exists in KMS, do nothing. Afterwards, sync secrets to Heroku.
          - **Import - Prefer values from Heroku**: Import secrets from Heroku to KMS; if a secret with the same name already exists in KMS, replace its value with the one from Heroku. Afterwards, sync secrets to Heroku.

        ![integrations heroku](../../images/integrations/heroku/integrations-heroku.png)
      </Step>
    </Steps>
  </Tab>
  <Tab title="Self-Hosted Setup">
    Using the Heroku integration on a self-hosted instance of KMS requires configuring an API client in Heroku
    and registering your instance with it.
    <Steps>
      <Step title="Create an API client in Heroku">
        Navigate to your user Account settings > Applications to create a new API client.

        ![integrations Heroku config](../../images/integrations/heroku/integrations-heroku-config-settings.png)
        ![integrations Heroku config](../../images/integrations/heroku/integrations-heroku-config-applications.png)
        ![integrations Heroku config](../../images/integrations/heroku/integrations-heroku-config-new-app.png)

          Create the API client. As part of the form, set the **OAuth callback URL** to `https://your-domain.com/integrations/heroku/oauth2/callback`.

        ![integrations Heroku config](../../images/integrations/heroku/integrations-heroku-config-new-app-form.png)
      </Step>
      <Step title="Add your Heroku API client credentials to KMS">
        Obtain the **Client ID** and **Client Secret** for your Heroku API client.

        ![integrations Heroku config](../../images/integrations/heroku/integrations-heroku-config-credentials.png)

        Back in your KMS instance, add two new environment variables for the credentials of your Heroku API client.

        - `CLIENT_ID_HEROKU`: The **Client ID** of your Heroku API client.
        - `CLIENT_SECRET_HEROKU`: The **Client Secret** of your Heroku API client.

        Once added, restart your KMS instance and use the Heroku integration.
      </Step>
    </Steps>
  </Tab>
</Tabs>
